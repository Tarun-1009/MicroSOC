/* ===========================
   CSS VARIABLES FOR THEMING
   =========================== */

:root[data-theme="light"] {
  /* Background Colors */
  --bg-primary: #ffffff;
  --bg-secondary: #f5f5f5;
  --bg-tertiary: #f9fafb;
  --bg-hover: #f3f4f6;

  /* Text Colors */
  --text-primary: #1f2937;
  --text-secondary: #6b7280;
  --text-tertiary: #9ca3af;

  /* Border Colors */
  --border-primary: #e5e7eb;
  --border-secondary: #f3f4f6;

  /* Accent Colors */
  --accent-blue: #3b82f6;
  --accent-blue-hover: #2563eb;
  --accent-blue-light: #dbeafe;

  /* Status Colors */
  --status-critical-bg: #fee2e2;
  --status-critical-text: #991b1b;
  --status-high-bg: #fed7aa;
  --status-high-text: #9a3412;
  --status-medium-bg: #fef3c7;
  --status-medium-text: #92400e;
  --status-low-bg: #f3f4f6;
  --status-low-text: #4b5563;

  /* Chart Colors */
  --chart-grid: #e5e7eb;
  --chart-high: #f97316;
  --chart-low: #60a5fa;

  /* Shadow */
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.15);

  /* Tooltip */
  --tooltip-bg: rgba(255, 255, 255, 0.95);
  --tooltip-border: #e5e7eb;
}

:root[data-theme="dark"] {
  /* Background Colors */
  --bg-primary: #1a1a1a;
  --bg-secondary: #0f0f0f;
  --bg-tertiary: #262626;
  --bg-hover: #333333;

  /* Text Colors */
  --text-primary: #f3f4f6;
  --text-secondary: #d1d5db;
  --text-tertiary: #9ca3af;

  /* Border Colors */
  --border-primary: #404040;
  --border-secondary: #333333;

  /* Accent Colors */
  --accent-blue: #60a5fa;
  --accent-blue-hover: #3b82f6;
  --accent-blue-light: #1e3a8a;

  /* Status Colors */
  --status-critical-bg: #7f1d1d;
  --status-critical-text: #fecaca;
  --status-high-bg: #7c2d12;
  --status-high-text: #fed7aa;
  --status-medium-bg: #78350f;
  --status-medium-text: #fef3c7;
  --status-low-bg: #404040;
  --status-low-text: #d1d5db;

  /* Chart Colors */
  --chart-grid: #404040;
  --chart-high: #fb923c;
  --chart-low: #60a5fa;

  /* Shadow */
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.5);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.6);

  /* Tooltip */
  --tooltip-bg: rgba(38, 38, 38, 0.98);
  --tooltip-border: #404040;
}

/* ===========================
   GLOBAL STYLES
   =========================== */

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
  background: var(--bg-secondary);
  color: var(--text-primary);
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Smooth transitions for theme changes */
* {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* Scrollbar Styling */
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: var(--bg-secondary);
}

::-webkit-scrollbar-thumb {
  background: var(--border-primary);
  border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--text-tertiary);
}

/* ===========================
   THEME TOGGLE BUTTON
   =========================== */

/* ===========================
   THEME TOGGLE BUTTON
   =========================== */

/* ===========================
   THEME TOGGLE BUTTON
   =========================== */

.theme-toggle {
  position: relative;
  width: 44px;
  /* Equal width and height for circle */
  height: 44px;
  background: var(--bg-hover);
  border: 1px solid var(--border-primary);
  border-radius: 50%;
  /* Perfect circle */
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  /* Center the inner element */
  padding: 0;
  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);

  /* Interaction Protections */
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  /* Premium Depth */
  box-shadow:
    0 2px 5px rgba(0, 0, 0, 0.05),
    0 1px 1px rgba(255, 255, 255, 0.3);
}

/* Dark mode enhancements */
[data-theme="dark"] .theme-toggle {
  background: #2a2a2a;
  border-color: #404040;
  box-shadow:
    0 2px 5px rgba(0, 0, 0, 0.4),
    0 1px 0 rgba(255, 255, 255, 0.05);
}

/* PRESS STATE */
.theme-toggle:active {
  transform: scale(0.92);
}

.theme-toggle:hover {
  border-color: var(--accent-blue);
  background: var(--bg-tertiary);
}

[data-theme="dark"] .theme-toggle:hover {
  background: #333;
}

/* The inner circle/icon container */
/* The inner circle/icon container */
.theme-toggle-slider {
  position: relative;
  /* No longer absolute moving track */
  width: 100%;
  height: 100%;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  /* Remove background, icon floats or we use container bg */

  /* Rotation Animation - Slower smoother spin */
  transition: transform 0.7s ease-out;
}

/* Icon Styling */
.theme-toggle-slider svg {
  width: 20px;
  height: 20px;
  color: var(--text-secondary);
  transition: color 0.2s ease;
}

[data-theme="dark"] .theme-toggle-slider svg {
  color: var(--accent-blue);
  /* Highlight icon in dark mode */
}

/* ANIMATION STATES */

/* Light mode - 0 rotation */
[data-theme="light"] .theme-toggle-slider {
  transform: rotate(0deg);
}

/* Dark mode - Rotate 360 (One full spin) */
[data-theme="dark"] .theme-toggle-slider {
  transform: rotate(360deg);
}

/* Ensure svg stays upright if we want, OR let it rotate with container.
   User asked for "rotate between dark and night", so spinning the whole icon is desired.
   We can add a subtle cross-fade or icon morph if needed, 
   but for now we rotate the container. */